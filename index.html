<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- ✅ theme-color: controlada pelo JS abaixo via IntersectionObserver -->
  <!-- O JS detecta prefers-color-scheme e escolhe a cor certa por seção -->
  <meta name="theme-color" content="#4a90d9" id="theme-color-meta">

  <title>Theme Color Demo</title>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;700;800&family=DM+Sans:wght@300;400;500&display=swap" rel="stylesheet">

  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --font-display: 'Syne', sans-serif;
      --font-body: 'DM Sans', sans-serif;
    }

    html { scroll-behavior: smooth; }

    body {
      font-family: var(--font-body);
      overflow-x: hidden;
    }

    /* ─── INDICADOR FIXO ─────────────────────────── */
    #indicator {
      position: fixed;
      top: 16px;
      right: 16px;
      z-index: 999;
      background: rgba(255,255,255,0.12);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 12px;
      padding: 10px 16px;
      font-family: var(--font-body);
      font-size: 11px;
      color: #fff;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: background 0.4s, border-color 0.4s;
      pointer-events: none;
    }
    #indicator-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #fff;
      flex-shrink: 0;
      transition: background 0.4s;
      box-shadow: 0 0 0 3px rgba(255,255,255,0.2);
    }
    #indicator-text { line-height: 1.3; opacity: 0.9; }
    #indicator-color { font-weight: 700; font-size: 12px; letter-spacing: 0.04em; }

    /* ─── SEÇÕES ─────────────────────────────────── */
    section {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 80px 32px;
      position: relative;
      overflow: hidden;
    }

    .section-label {
      font-family: var(--font-body);
      font-size: 11px;
      font-weight: 500;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      opacity: 0.5;
      margin-bottom: 16px;
    }

    h2 {
      font-family: var(--font-display);
      font-size: clamp(2.5rem, 8vw, 5rem);
      font-weight: 800;
      line-height: 1.05;
      margin-bottom: 20px;
      text-align: center;
    }

    p.desc {
      font-size: clamp(1rem, 2vw, 1.2rem);
      font-weight: 300;
      line-height: 1.7;
      max-width: 520px;
      text-align: center;
      opacity: 0.75;
    }

    .code-badge {
      margin-top: 32px;
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.15);
      border-radius: 8px;
      padding: 12px 20px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      opacity: 0.8;
      letter-spacing: 0.02em;
    }

    /* ─── SEÇÃO 1: AZUL ──────────────────────────── */
    #s1 { background: #4a90d9; color: #fff; }
    #s1::before {
      content: '';
      position: absolute;
      width: 600px; height: 600px;
      background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
      top: -100px; left: -100px;
      pointer-events: none;
    }

    /* ─── SEÇÃO 2: VERDE ──────────────────────────── */
    #s2 { background: #16a34a; color: #f0fdf4; }
    #s2::before {
      content: '';
      position: absolute;
      width: 500px; height: 500px;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
      bottom: -80px; right: -80px;
      pointer-events: none;
    }

    /* ─── SEÇÃO 3: CREME ──────────────────────────── */
    #s3 { background: #faf8f3; color: #1a1510; }
    #s3 .section-label { color: #1a1510; }
    #s3::before {
      content: '';
      position: absolute;
      width: 400px; height: 400px;
      background: radial-gradient(circle, rgba(234,179,8,0.12) 0%, transparent 70%);
      top: 50%; left: 50%; transform: translate(-50%,-50%);
      pointer-events: none;
    }

    /* ─── SEÇÃO 4: ROXO ───────────────────────────── */
    #s4 { background: #7c3aed; color: #ede9fe; }
    #s4::before {
      content: '';
      position: absolute;
      width: 700px; height: 400px;
      background: radial-gradient(ellipse, rgba(255,255,255,0.1) 0%, transparent 70%);
      top: 50%; left: 50%; transform: translate(-50%,-50%);
      pointer-events: none;
    }

    /* ─── SEÇÃO 5: VERMELHO ───────────────────────── */
    #s5 { background: #dc2626; color: #fee2e2; }
    #s5::before {
      content: '';
      position: absolute;
      width: 600px; height: 600px;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
      bottom: -100px; left: -50px;
      pointer-events: none;
    }

    /* ─── DARK MODE: fundos escuros ───────────────── */
    @media (prefers-color-scheme: dark) {
      #s1 { background: #0f1b2d; }
      #s2 { background: #052e16; color: #d1fae5; }
      #s3 { background: #1a1510; color: #faf8f3; }
      #s3 .section-label { color: #faf8f3; }
      #s4 { background: #1e0a3c; }
      #s5 { background: #1c0a0a; }
    }

    /* ─── CODE BADGES ─────────────────────────────── */
    .code-badge {
      margin-top: 12px;
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,255,255,0.15);
      border-radius: 8px;
      padding: 12px 20px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      opacity: 0.8;
      letter-spacing: 0.02em;
    }

    /* Mostra só o badge relevante para o tema atual */
    @media (prefers-color-scheme: light) {
      .code-dark { display: none; }
    }
    @media (prefers-color-scheme: dark) {
      .code-light { display: none; }
    }

    #s3 .code-badge {
      background: rgba(0,0,0,0.06);
      border-color: rgba(0,0,0,0.12);
      color: inherit;
    }

    /* ─── SETA SCROLL ─────────────────────────────── */
    .scroll-hint {
      position: absolute;
      bottom: 32px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 6px;
      opacity: 0.4;
      font-size: 11px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      animation: bounce 2s ease-in-out infinite;
    }
    .scroll-hint svg { width: 20px; height: 20px; }

    @keyframes bounce {
      0%, 100% { transform: translateX(-50%) translateY(0); }
      50% { transform: translateX(-50%) translateY(6px); }
    }

    /* ─── HERO EXTRA ──────────────────────────────── */
    .tag {
      display: inline-block;
      background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.15);
      border-radius: 999px;
      padding: 4px 14px;
      font-size: 12px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      margin-bottom: 24px;
    }

    .nav-dots {
      position: fixed;
      left: 16px;
      top: 50%;
      transform: translateY(-50%);
      display: flex;
      flex-direction: column;
      gap: 10px;
      z-index: 999;
    }
    .nav-dot {
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: rgba(255,255,255,0.3);
      cursor: pointer;
      transition: background 0.3s, transform 0.3s;
      border: none;
      padding: 0;
    }
    .nav-dot.active {
      background: rgba(255,255,255,0.9);
      transform: scale(1.6);
    }
  </style>
</head>
<body>

  <!-- Indicador flutuante -->
  <div id="indicator">
    <div id="indicator-dot"></div>
    <div id="indicator-text">
      theme-color<br>
      <span id="indicator-color">#0f1b2d</span>
    </div>
  </div>

  <!-- Nav dots -->
  <nav class="nav-dots" aria-label="Navegação por seção">
    <button class="nav-dot active" onclick="scrollToSection('s1')" aria-label="Seção 1"></button>
    <button class="nav-dot" onclick="scrollToSection('s2')" aria-label="Seção 2"></button>
    <button class="nav-dot" onclick="scrollToSection('s3')" aria-label="Seção 3"></button>
    <button class="nav-dot" onclick="scrollToSection('s4')" aria-label="Seção 4"></button>
    <button class="nav-dot" onclick="scrollToSection('s5')" aria-label="Seção 5"></button>
  </nav>

  <!-- ═══ SEÇÃO 1 ═══ -->
  <section id="s1" data-theme-light="#4a90d9" data-theme-dark="#0f1b2d">
    <span class="tag">theme-color demo</span>
    <span class="section-label">Seção 01 — Azul</span>
    <h2>Role a página<br>e veja a magia.</h2>
    <p class="desc">
      Cada seção muda a cor da barra do navegador no mobile.
      Abra no <strong>Safari (iOS)</strong> ou <strong>Chrome (Android)</strong> para ver o efeito.
    </p>
    <div class="code-badge code-light">&lt;meta name="theme-color" content="<strong>#4a90d9</strong>"&gt; <em>(light)</em></div>
    <div class="code-badge code-dark">&lt;meta name="theme-color" content="<strong>#0f1b2d</strong>"&gt; <em>(dark)</em></div>
    <div class="scroll-hint">
      scroll
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M12 5v14M5 12l7 7 7-7"/>
      </svg>
    </div>
  </section>

  <!-- ═══ SEÇÃO 2 ═══ -->
  <section id="s2" data-theme-light="#16a34a" data-theme-dark="#052e16">
    <span class="section-label">Seção 02 — Verde</span>
    <h2>A barra agora<br>é verde.</h2>
    <p class="desc">
      O JS detecta <code>prefers-color-scheme</code> e escolhe a cor certa para o tema
      atual do sistema — light ou dark.
    </p>
    <div class="code-badge code-light">&lt;meta name="theme-color" content="<strong>#16a34a</strong>"&gt; <em>(light)</em></div>
    <div class="code-badge code-dark">&lt;meta name="theme-color" content="<strong>#052e16</strong>"&gt; <em>(dark)</em></div>
  </section>

  <!-- ═══ SEÇÃO 3 ═══ -->
  <section id="s3" data-theme-light="#faf8f3" data-theme-dark="#1a1510">
    <span class="section-label">Seção 03 — Creme</span>
    <h2>Funciona em<br>tons claros.</h2>
    <p class="desc">
      No dark mode o creme vira marrom escuro — a barra continua harmoniosa
      com o conteúdo em qualquer tema.
    </p>
    <div class="code-badge code-light">&lt;meta name="theme-color" content="<strong>#faf8f3</strong>"&gt; <em>(light)</em></div>
    <div class="code-badge code-dark">&lt;meta name="theme-color" content="<strong>#1a1510</strong>"&gt; <em>(dark)</em></div>
  </section>

  <!-- ═══ SEÇÃO 4 ═══ -->
  <section id="s4" data-theme-light="#7c3aed" data-theme-dark="#1e0a3c">
    <span class="section-label">Seção 04 — Roxo</span>
    <h2>Só uma linha<br>de HTML.</h2>
    <p class="desc">
      No light o roxo é vibrante; no dark, profundo. O <code>matchMedia</code>
      escuta mudanças em tempo real — se o usuário trocar o tema, a cor atualiza na hora.
    </p>
    <div class="code-badge code-light">&lt;meta name="theme-color" content="<strong>#7c3aed</strong>"&gt; <em>(light)</em></div>
    <div class="code-badge code-dark">&lt;meta name="theme-color" content="<strong>#1e0a3c</strong>"&gt; <em>(dark)</em></div>
  </section>

  <!-- ═══ SEÇÃO 5 ═══ -->
  <section id="s5" data-theme-light="#dc2626" data-theme-dark="#1c0a0a">
    <span class="section-label">Seção 05 — Vermelho</span>
    <h2>Simples assim.</h2>
    <p class="desc">
      Funciona no <strong>Safari iOS 15+</strong> e <strong>Chrome Android</strong>.
      Navegadores que não suportam simplesmente ignoram a tag — zero risco.
    </p>
    <div class="code-badge code-light">&lt;meta name="theme-color" content="<strong>#dc2626</strong>"&gt; <em>(light)</em></div>
    <div class="code-badge code-dark">&lt;meta name="theme-color" content="<strong>#1c0a0a</strong>"&gt; <em>(dark)</em></div>
  </section>

  <script>
    const metaTag   = document.getElementById('theme-color-meta');
    const dot       = document.getElementById('indicator-dot');
    const colorText = document.getElementById('indicator-color');
    const navDots   = document.querySelectorAll('.nav-dot');
    const sections  = document.querySelectorAll('section[data-theme-light]');

    // Detecta dark mode em tempo real
    const darkMQ = window.matchMedia('(prefers-color-scheme: dark)');
    const isDark = () => darkMQ.matches;

    let currentSection = sections[0];

    function scrollToSection(id) {
      document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
    }

    function applyTheme(section, index) {
      const color = isDark()
        ? section.dataset.themeDark
        : section.dataset.themeLight;

      metaTag.setAttribute('content', color);
      dot.style.background = color;
      dot.style.border = '2px solid rgba(255,255,255,0.4)';
      colorText.textContent = color;

      navDots.forEach((d, i) => d.classList.toggle('active', i === index));
    }

    // IntersectionObserver: seção visível > 50%
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          currentSection = entry.target;
          const index = Array.from(sections).indexOf(entry.target);
          applyTheme(entry.target, index);
        }
      });
    }, { threshold: 0.5 });

    sections.forEach(s => observer.observe(s));

    // Se o usuário mudar o tema do sistema enquanto está na página, atualiza na hora
    darkMQ.addEventListener('change', () => {
      const index = Array.from(sections).indexOf(currentSection);
      applyTheme(currentSection, index);
    });
  </script>
</body>
</html>